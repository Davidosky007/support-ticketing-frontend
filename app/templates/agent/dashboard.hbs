<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Agent Dashboard</h1>
    <div class="dashboard-actions">
      <button {{on "click" this.downloadTicketsCsv}} class="btn-export" disabled={{this.isLoading}}>
        {{#if this.isLoading}}
          <i class="fas fa-spinner fa-spin"></i> Generating...
        {{else}}
          <i class="fas fa-file-download"></i> Export Closed Tickets (Last Month)
        {{/if}}
      </button>
    </div>
  </div>

  <h2>My Assigned Tickets</h2>
  {{#if this.assignedTickets.length}}
    <div class="tickets-list">
      <div class="tickets-grid tickets-grid-header">
        <div class="ticket-id">ID</div>
        <div class="ticket-subject">Subject</div>
        <div class="ticket-customer">Customer</div>
        <div class="ticket-status">Status</div>
        <div class="ticket-date">Created</div>
        <div class="ticket-actions">Actions</div>
      </div>
      {{#each this.assignedTickets as |ticket|}}
        <div class="tickets-grid ticket-row {{ticket.status}}">
          <div class="ticket-id">{{ticket.id}}</div>
          <div class="ticket-subject">{{ticket.subject}}</div>
          <div class="ticket-customer">{{ticket.customer.name}}</div>
          <div class="ticket-status">
            <span class="status-badge {{ticket.status}}">{{ticket.status}}</span>
          </div>
          <div class="ticket-date">{{format-date ticket.createdAt}}</div>
          <div class="ticket-actions">
            <LinkTo @route="agent.ticket" @model={{ticket.id}} class="btn-view">
              <i class="fas fa-eye"></i> View
            </LinkTo>
          </div>
        </div>
      {{/each}}
    </div>
  {{else}}
    <div class="empty-state">
      <div class="empty-state-icon">
        <i class="fas fa-ticket-alt"></i>
      </div>
      <h3>No assigned tickets</h3>
      <p>You have not been assigned any tickets yet.</p>
    </div>
  {{/if}}

  <h2>Unassigned Tickets</h2>
  {{#if this.unassignedTickets.length}}
    <div class="tickets-list">
      <div class="tickets-grid tickets-grid-header">
        <div class="ticket-id">ID</div>
        <div class="ticket-subject">Subject</div>
        <div class="ticket-customer">Customer</div>
        <div class="ticket-status">Status</div>
        <div class="ticket-date">Created</div>
        <div class="ticket-actions">Actions</div>
      </div>
      {{#each this.unassignedTickets as |ticket|}}
        <div class="tickets-grid ticket-row {{ticket.status}}">
          <div class="ticket-id">{{ticket.id}}</div>
          <div class="ticket-subject">{{ticket.subject}}</div>
          <div class="ticket-customer">{{ticket.customer.name}}</div>
          <div class="ticket-status">
            <span class="status-badge {{ticket.status}}">{{ticket.status}}</span>
          </div>
          <div class="ticket-date">{{format-date ticket.createdAt}}</div>
          <div class="ticket-actions">
            <button class="btn-assign" {{on "click" (fn this.assignTicket ticket.id)}}>
              Assign to Me
            </button>
            <LinkTo @route="agent.ticket" @model={{ticket.id}} class="btn-view">
              <i class="fas fa-eye"></i> View
            </LinkTo>
          </div>
        </div>
      {{/each}}
    </div>
  {{else}}
    <div class="empty-state">
      <div class="empty-state-icon">
        <i class="fas fa-ticket-alt"></i>
      </div>
      <h3>No unassigned tickets</h3>
      <p>There are no unassigned tickets at the moment.</p>
    </div>
  {{/if}}
</div>
